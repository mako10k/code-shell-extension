{
  "name": "mcp-shell-server-vscode",
  "displayName": "Safe Shell Runner",
  "description": "VS Code extension that registers MCP Shell Server as Safe Shell Runner.",
  "version": "0.2.4",
  "publisher": "mako10k",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/mako10k/mcp-shell-server.git"
  },
  "engines": {
    "vscode": "^1.101.0"
  },
  "categories": [
    "Other"
  ],
  "activationEvents": [
    "onLanguageModelTool:shell_execute",
    "onLanguageModelTool:process_get_execution",
    "onLanguageModelTool:shell_set_default_workdir",
    "onLanguageModelTool:list_execution_outputs",
    "onLanguageModelTool:read_execution_output",
    "onLanguageModelTool:delete_execution_outputs",
    "onLanguageModelTool:get_cleanup_suggestions",
    "onLanguageModelTool:perform_auto_cleanup",
    "onLanguageModelTool:terminal_operate",
    "onLanguageModelTool:terminal_list",
    "onLanguageModelTool:terminal_get_info",
    "onLanguageModelTool:terminal_close",
    "onLanguageModelTool:command_history_query",
    "onLanguageModelTool:server_current",
    "onLanguageModelTool:server_list_attachable",
    "onLanguageModelTool:server_start",
    "onLanguageModelTool:server_stop",
    "onLanguageModelTool:server_get",
    "onLanguageModelTool:server_detach",
    "onLanguageModelTool:server_reattach",
    "onMcpServerDefinitionProvider:mcp-shell-server.provider"
  ],
  "main": "./dist/extension.js",
  "contributes": {
    "mcpServerDefinitionProviders": [
      {
        "id": "mcp-shell-server.provider",
        "label": "MCP Shell Server"
      }
    ],
    "languageModelTools": [
      {
        "name": "shell_execute",
        "displayName": "Shell Execute",
        "modelDescription": "Execute shell commands securely using MCP Shell Server. Returns a JSON string with execution status, outputs, and metadata. Use when a real shell command must run.",
        "userDescription": "Execute a shell command via MCP Shell Server and return JSON output.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "shell_execute",
        "inputSchema": {
          "type": "object",
          "properties": {
            "command": {
              "type": "string",
              "description": "Shell command to execute."
            }
          },
          "required": [
            "command"
          ],
          "additionalProperties": true
        }
      },
      {
        "name": "process_get_execution",
        "displayName": "Process Get Execution",
        "modelDescription": "Retrieve execution details for a command previously run via shell_execute. Returns JSON with status, timing, and output metadata.",
        "userDescription": "Fetch execution info by execution_id.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "process_get_execution",
        "inputSchema": {
          "type": "object",
          "properties": {
            "execution_id": {
              "type": "string",
              "description": "Execution ID returned by shell_execute."
            }
          },
          "required": [
            "execution_id"
          ],
          "additionalProperties": true
        }
      },
      {
        "name": "shell_set_default_workdir",
        "displayName": "Shell Set Default Workdir",
        "modelDescription": "Set the default working directory for future command executions. Returns JSON confirmation.",
        "userDescription": "Set the default working directory for commands.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "shell_set_default_workdir",
        "inputSchema": {
          "type": "object",
          "properties": {
            "working_directory": {
              "type": "string",
              "description": "Absolute path to set as default working directory."
            }
          },
          "required": [
            "working_directory"
          ],
          "additionalProperties": true
        }
      },
      {
        "name": "list_execution_outputs",
        "displayName": "List Execution Outputs",
        "modelDescription": "List output files generated by command executions. Returns JSON with file metadata.",
        "userDescription": "List execution output files.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "list_execution_outputs",
        "inputSchema": {
          "type": "object",
          "properties": {
            "output_type": {
              "type": "string",
              "description": "Filter by output type."
            },
            "execution_id": {
              "type": "string",
              "description": "Filter by execution ID."
            },
            "name_pattern": {
              "type": "string",
              "description": "Filter by name pattern."
            },
            "limit": {
              "type": "integer",
              "description": "Maximum number of files to return."
            }
          },
          "additionalProperties": true
        }
      },
      {
        "name": "read_execution_output",
        "displayName": "Read Execution Output",
        "modelDescription": "Read the full output content for a specific output_id. Returns JSON with content and offsets.",
        "userDescription": "Read execution output content by output_id.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "read_execution_output",
        "inputSchema": {
          "type": "object",
          "properties": {
            "output_id": {
              "type": "string",
              "description": "Output ID to read."
            },
            "offset": {
              "type": "integer",
              "description": "Byte offset for reading."
            },
            "size": {
              "type": "integer",
              "description": "Number of bytes to read."
            },
            "encoding": {
              "type": "string",
              "description": "Text encoding."
            }
          },
          "required": [
            "output_id"
          ],
          "additionalProperties": true
        }
      },
      {
        "name": "delete_execution_outputs",
        "displayName": "Delete Execution Outputs",
        "modelDescription": "Delete one or more execution output files. Requires explicit confirmation. Returns JSON with deletion results.",
        "userDescription": "Delete execution output files by output_ids.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "delete_execution_outputs",
        "inputSchema": {
          "type": "object",
          "properties": {
            "output_ids": {
              "type": "array",
              "items": {
                "type": "string"
              },
              "description": "List of output IDs to delete."
            },
            "confirm": {
              "type": "boolean",
              "description": "Must be true to proceed with deletion."
            }
          },
          "required": [
            "output_ids",
            "confirm"
          ],
          "additionalProperties": true
        }
      },
      {
        "name": "get_cleanup_suggestions",
        "displayName": "Get Cleanup Suggestions",
        "modelDescription": "Get cleanup recommendations for execution output files. Returns JSON with suggested actions.",
        "userDescription": "Suggest cleanup actions for execution outputs.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "get_cleanup_suggestions",
        "inputSchema": {
          "type": "object",
          "properties": {
            "max_size_mb": {
              "type": "number",
              "description": "Size threshold in MB."
            },
            "max_age_hours": {
              "type": "number",
              "description": "Age threshold in hours."
            },
            "include_warnings": {
              "type": "boolean",
              "description": "Include warning details."
            }
          },
          "additionalProperties": true
        }
      },
      {
        "name": "perform_auto_cleanup",
        "displayName": "Perform Auto Cleanup",
        "modelDescription": "Perform automatic cleanup of output files based on retention rules. Returns JSON summary.",
        "userDescription": "Run automated cleanup of execution outputs.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "perform_auto_cleanup",
        "inputSchema": {
          "type": "object",
          "properties": {
            "max_age_hours": {
              "type": "number",
              "description": "Delete files older than this many hours."
            },
            "dry_run": {
              "type": "boolean",
              "description": "If true, do not delete files."
            },
            "preserve_recent": {
              "type": "integer",
              "description": "Number of most recent files to preserve."
            }
          },
          "additionalProperties": true
        }
      },
      {
        "name": "terminal_operate",
        "displayName": "Terminal Operate",
        "modelDescription": "Unified terminal operation for creating sessions, sending input, and retrieving output. Returns JSON with terminal info and output.",
        "userDescription": "Operate an interactive terminal session.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "terminal_operate",
        "inputSchema": {
          "type": "object",
          "properties": {
            "terminal_id": {
              "type": "string",
              "description": "Existing terminal ID."
            },
            "command": {
              "type": "string",
              "description": "Command to run when creating a terminal."
            },
            "input": {
              "type": "string",
              "description": "Input to send to terminal."
            },
            "execute": {
              "type": "boolean",
              "description": "Send Enter after input."
            }
          },
          "additionalProperties": true
        }
      },
      {
        "name": "terminal_list",
        "displayName": "Terminal List",
        "modelDescription": "List active terminal sessions. Returns JSON with terminal summaries.",
        "userDescription": "List terminal sessions.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "terminal_list",
        "inputSchema": {
          "type": "object",
          "properties": {
            "session_name_pattern": {
              "type": "string",
              "description": "Filter by session name."
            },
            "status_filter": {
              "type": "string",
              "description": "Filter by status."
            },
            "limit": {
              "type": "integer",
              "description": "Maximum number of sessions."
            }
          },
          "additionalProperties": true
        }
      },
      {
        "name": "terminal_get_info",
        "displayName": "Terminal Get Info",
        "modelDescription": "Get detailed information for a terminal session. Returns JSON with terminal metadata.",
        "userDescription": "Fetch terminal details by terminal_id.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "terminal_get_info",
        "inputSchema": {
          "type": "object",
          "properties": {
            "terminal_id": {
              "type": "string",
              "description": "Terminal ID."
            }
          },
          "required": [
            "terminal_id"
          ],
          "additionalProperties": true
        }
      },
      {
        "name": "terminal_close",
        "displayName": "Terminal Close",
        "modelDescription": "Close a terminal session. Returns JSON with close status.",
        "userDescription": "Close a terminal session by terminal_id.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "terminal_close",
        "inputSchema": {
          "type": "object",
          "properties": {
            "terminal_id": {
              "type": "string",
              "description": "Terminal ID."
            },
            "save_history": {
              "type": "boolean",
              "description": "Save terminal history."
            }
          },
          "required": [
            "terminal_id"
          ],
          "additionalProperties": true
        }
      },
      {
        "name": "command_history_query",
        "displayName": "Command History Query",
        "modelDescription": "Query command history with pagination, filters, and analytics. Returns JSON with history results.",
        "userDescription": "Query command history entries.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "command_history_query",
        "inputSchema": {
          "type": "object",
          "properties": {
            "page": {
              "type": "integer",
              "description": "Page number."
            },
            "page_size": {
              "type": "integer",
              "description": "Entries per page."
            },
            "query": {
              "type": "string",
              "description": "Search term."
            }
          },
          "additionalProperties": true
        }
      },
      {
        "name": "server_current",
        "displayName": "Server Current",
        "modelDescription": "Get current server information, including attach status and socket path when available.",
        "userDescription": "Get current server metadata.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "server_current",
        "inputSchema": {
          "type": "object",
          "properties": {},
          "additionalProperties": false
        }
      },
      {
        "name": "server_list_attachable",
        "displayName": "Server List Attachable",
        "modelDescription": "List attachable servers for a working directory boundary.",
        "userDescription": "List attachable servers by working directory.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "server_list_attachable",
        "inputSchema": {
          "type": "object",
          "properties": {
            "cwd": {
              "type": "string",
              "description": "Working directory used to discover attachable servers."
            }
          },
          "required": [
            "cwd"
          ],
          "additionalProperties": true
        }
      },
      {
        "name": "server_start",
        "displayName": "Server Start",
        "modelDescription": "Start or discover a server for the specified working directory.",
        "userDescription": "Start a server for a working directory.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "server_start",
        "inputSchema": {
          "type": "object",
          "properties": {
            "cwd": {
              "type": "string",
              "description": "Working directory for the server."
            },
            "socket_path": {
              "type": "string",
              "description": "Optional explicit socket path override."
            },
            "allow_existing": {
              "type": "boolean",
              "description": "Allow reuse when a server is already running."
            }
          },
          "required": [
            "cwd"
          ],
          "additionalProperties": true
        }
      },
      {
        "name": "server_stop",
        "displayName": "Server Stop",
        "modelDescription": "Stop a running server by server_id.",
        "userDescription": "Stop a server by server_id.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "server_stop",
        "inputSchema": {
          "type": "object",
          "properties": {
            "server_id": {
              "type": "string",
              "description": "Server ID to stop."
            },
            "force": {
              "type": "boolean",
              "description": "Force stop even if clients are attached."
            }
          },
          "required": [
            "server_id"
          ],
          "additionalProperties": true
        }
      },
      {
        "name": "server_get",
        "displayName": "Server Get",
        "modelDescription": "Get server metadata by server_id.",
        "userDescription": "Get server metadata by server_id.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "server_get",
        "inputSchema": {
          "type": "object",
          "properties": {
            "server_id": {
              "type": "string",
              "description": "Server ID to fetch."
            }
          },
          "required": [
            "server_id"
          ],
          "additionalProperties": true
        }
      },
      {
        "name": "server_detach",
        "displayName": "Server Detach",
        "modelDescription": "Detach from a server without stopping it.",
        "userDescription": "Detach from a server by server_id.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "server_detach",
        "inputSchema": {
          "type": "object",
          "properties": {
            "server_id": {
              "type": "string",
              "description": "Server ID to detach from."
            }
          },
          "required": [
            "server_id"
          ],
          "additionalProperties": true
        }
      },
      {
        "name": "server_reattach",
        "displayName": "Server Reattach",
        "modelDescription": "Attach to a detached server by server_id.",
        "userDescription": "Attach to a detached server by server_id.",
        "canBeReferencedInPrompt": true,
        "toolReferenceName": "server_reattach",
        "inputSchema": {
          "type": "object",
          "properties": {
            "server_id": {
              "type": "string",
              "description": "Server ID to attach to."
            }
          },
          "required": [
            "server_id"
          ],
          "additionalProperties": true
        }
      }
    ]
  },
  "scripts": {
    "build": "npm run typecheck && npm run bundle:extension",
    "bundle:extension": "esbuild src/extension.ts --bundle --platform=node --target=node18 --format=cjs --sourcemap --outfile=dist/extension.js --external:vscode --external:node-pty",
    "package": "npm run build && npx -y @vscode/vsce package",
    "package:release": "npm install --include=dev && npm run build && npm prune --omit=dev && npx -y @vscode/vsce package",
    "typecheck": "tsc -p . --noEmit",
    "watch": "tsc -p . -w"
  },
  "dependencies": {
    "@mako10k/shell-server": "0.2.4"
  },
  "devDependencies": {
    "esbuild": "^0.25.0",
    "@types/node": "^20.14.0",
    "@types/vscode": "^1.101.0",
    "typescript": "^5.5.0"
  }
}
